<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
      border: 0;
    }

    svg {
      cursor: pointer;
    }

    circle {
      fill: #001f3f;
    }

    path {
      fill: none;
      stroke: #001f3f;
      stroke-width: 2;
    }
  </style>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>
  <script type="text/javascript">
    var width = 400;
    var height = 400;
    var radius = 4;
    var numCircles = 20;

    var svg = d3.select('body')
      .append('svg')
      .attr('width', width)
      .attr('height', height);

    // maps point positions to pixel positions along the x axis
    var spread = d3.scale.ordinal()
      .domain(d3.range(numCircles))
      .rangeBands([0, width]);

    // function for generating svg path
    var line = d3.svg.line()
      .x(function(d) { return d.x; })
      .y(function(d) { return d.y; })
      .interpolate("cardinal");

    // create a fixed number of points for the graph
    var points = d3.range(numCircles).map(function(d) {
      return {
        x: spread(d),
        y: Math.floor(Math.random() * height)
      }
    });

    var circles = svg
      .append('g')
      .selectAll('circle')
      .data(points)
      .enter()
        .append('circle')
        .attr({
          r: radius,
          cx: function(d) { return d.x },
          cy: function(d) { return d.y }
        });

    function drawPath() {
      var path = svg.selectAll('path').data([points]);
      path.enter().append('path');
      path.attr('d', line);
      path.exit().remove();
    }

    // draw the initial path through the points
    drawPath();

    var drag = d3.behavior.drag().on('drag', dragHandler);
    svg.call(drag);

    function dragHandler() {
      var x = d3.event.x;
      var y = d3.event.y;

      var range = spread.range();
      var space = spread.rangeBand() / 2;
      for (var i = 0; x > (range[i] + space); i++) {}

      if (i >= circles[0].length) return;

      d3.select(circles[0][i]).attr('cy', y);
      points[i].y = y;
      drawPath();
    }
  </script>
</body>
</html>
